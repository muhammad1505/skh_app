{{define "content"}}
<h1 class="h3 mb-4 text-gray-800">Pengaturan Aplikasi</h1>
<div class="card shadow mb-4">
    <div class="card-header py-3">
        <h6 class="m-0 font-weight-bold text-primary">Konfigurasi Surat & Kantor</h6>
    </div>
    <div class="card-body">
        <form action="/pengaturan" method="POST" enctype="multipart/form-data">
            <div class="form-row">
                <div class="form-group col-md-4"><label>Kop Baris 1</label><input type="text" class="form-control" name="kop_surat_1" value="{{.Pengaturan.KopSurat1}}"></div>
                <div class="form-group col-md-4"><label>Kop Baris 2 (Resor)</label><input type="text" class="form-control" name="kop_surat_2" value="{{.Pengaturan.KopSurat2}}"></div>
                <div class="form-group col-md-4"><label>Kop Baris 3 (Sektor)</label><input type="text" class="form-control" name="kop_surat_3" value="{{.Pengaturan.KopSurat3}}">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label>Upload Logo Kop Surat</label>
                    <input type="file" class="form-control-file" name="logo">
                    <small class="form-text text-muted">Kosongkan jika tidak ingin mengubah. Logo saat ini:</small>
            
                    {{if .Pengaturan.LogoPath}}
                        <img src="{{.Pengaturan.LogoPath}}?v={{.Timestamp}}" alt="Logo saat ini" style="max-height: 80px; background-color: #eee; padding: 5px; margin-top: 5px;">
                    {{else}}
                        <p class="mt-2"><i>Belum ada logo.</i></p>
                    {{end}}
                </div>
            
                <div class="form-group col-md-6">
                    <label>Wilayah Surat</label>
                    <input type="text" class="form-control" name="wilayah" value="{{.Pengaturan.Wilayah}}" placeholder="Cth: Bahodopi">
            
                    <label class="mt-3">Nama Kantor</label>
                    <input type="text" class="form-control" name="nama_kantor" value="{{.Pengaturan.NamaKantor}}" placeholder="Cth: Kantor Polsek Bahodopi">
                </div>
            </div>
            <hr>
            <h5>Format Penomoran Surat</h5>
            <div class="form-row">
                <div class="form-group col-md-8"><label>Format</label><input type="text" class="form-control" name="format_nomor_surat" value="{{.Pengaturan.FormatNomorSurat}}"></div>
                <div class="form-group col-md-4"><label>Set Manual Nomor Terakhir</label><input type="number" class="form-control" name="last_nomor_surat" value="{{.Pengaturan.LastNomorSurat}}"></div>
            </div>
            <hr>
            <h5>Penanggung Jawab Surat</h5>
            <div class="form-row">
                <div class="form-group col-md-6"><label>Pejabat Yang Mengesahkan</label><select name="pejabat_id" class="form-control"><option value="0">-- Tidak Ada --</option>{{range .PejabatList}}<option value="{{.ID}}" {{if eq .ID $.Pengaturan.PejabatID}}selected{{end}}>{{.Nama}} - {{.Jabatan}}</option>{{end}}</select></div>
                <div class="form-group col-md-6"><label>Penerima Laporan</label><select name="penerima_id" class="form-control"><option value="0">-- Tidak Ada --</option>{{range .PenerimaList}}<option value="{{.ID}}" {{if eq .ID $.Pengaturan.PenerimaID}}selected{{end}}>{{.Nama}} - {{.Jabatan}}</option>{{end}}</select></div>
            </div>
            <button type="submit" class="btn btn-primary mt-3">Simpan Pengaturan</button>
        </form>
    </div>
</div>
{{end}}
